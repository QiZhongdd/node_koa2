key:4htJXoA4rJ9fc9zz

中间件：中间件相当于一个函数，但这个函数需要注册到应用中，需要前端触发才能启用

保证中间件按照洋葱模型执行，一定要在next前面加上await。为什么中间件一定要按照洋葱模型执行：是为了确定能够获取到后面的中间件执行完毕。主要应用为获取返回值和记时。

异常处理：1:全局处理异常。2.只在调用第三方库的时候调用try catch，因为第三方库不能保证完全正确或者抛出异常，自己写的函数不调用try ..catch。
try catch 是捕捉不到异步的异常的，要想捕捉到要使用promise和async await.

以中间件的形式挂载在app中，只会使用一次。如果是对象的话不能挂在在app中，因为当在A定义了属性值后，然后在b中修改属性值。a是得不到原来的值的。

token:一串随机字符串，但是携带数据的，一般携带uid

设计数据哭的思想
把数据库分为业务表和实体表
实体表：设计由粗到细，比如期刊主题，期刊可以分为书籍、电影、音乐。分别设计三个表，这样方便扩张
业务表：业务表时比较抽象的，主要用来记录业务，解决业务问题。比如开发期刊中的一期 二期。如果业务表设计好了，可以简化开发。

数据库事务：它是一个操作序列，这些操作要么都执行，要么都不执行，它是一个不可分割的工作单位这样能保证数据的一致性。

数据库事务的特点：ACID 原子性 一致性  隔离性 持久性
原子性是指事务是一个不可再分割的工作单元，事务中的操作要么都发生，要么都不发生。
一致性是指在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。这是说数据库事务不能破坏关系数据的完整性以及业务逻辑上的一致性。这样能保证有关联的表中的数据一致。

隔离性：多个事务并发访问时，事务之间是隔离的，一个事务不应该影响其它事务运行效果。
在并发环境中，当不同的事务同时操纵相同的数据时，每个事务都有各自的完整数据空间。由并发事务所做的修改必须与任何其他并发事务所做的修改隔离。事务查看数据更新时，数据所处的状态要么是另一事务修改它之前的状态，要么是另一事务修改它之后的状态，事务不会查看到中间状态的数据。
事务最复杂问题都是由事务隔离性引起的。完全的隔离性是不现实的，完全的隔离性要求数据库同一时间只执行一条事务，这样会严重影响性能。
持久性，意味着在事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。

需要用到用户本人的uid的时候不能从外部传入，一般直接从后台拿，这样比较安全。假如传uid进来，用户是有权限的，他可以篡改uid去修改别人的数据

Class与function的区别：class可以在constructor中保存状态，当第一次调用的时候在constructor中保存状态，可以在其他地方调研该状态，而function不行

不能循环查询数据库，查询次数是不可控的，很耗性能。

静态与实例：在js开发中用面向对象的思想进行开发会比较方便维护，虽然比较麻烦，但能保证质量，也能保存相关的状态，而用function的话虽然比较方便，但不方便维护，特别是传入多个参数的时候。在class 使用 get name（）这种格式命名，是不能传参的
